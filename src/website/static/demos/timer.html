<html>

<head>
<title>Flapjax Timer REPL</title>
<style type="text/css">

#ui { 
  padding: 5px;
  position: absolute;
  background-color: #ccccff;
  width: 900px;
  height: 45px;
}

#ui #progressBorder {
  width: 750px;
  height: 35px;
  position: absolute;
  border: 3px solid black;
}

#ui input {
  position: absolute;
  font-size: 30px;
  color:#000;
  font-family: Helvetica, sans-serif;
  background-color:#ffffff;
  border:1px solid #363;
  height: 100%;
  top: 0px;
  right: 0px;
}

</style>
<script type="text/javascript" src="/fx/flapjax.js"></script>
<script type="text/javascript" src="/demos/repl.js"></script>
<script type="text/javascript">

function showTime(val) {
  $("progressBar").style.width = val + "px" }

</script>
</head>

<body>

<div id="ui">
  <span id="progressBorder">
  <div id="progressBar" style="background-color: red; width: 0px; height: 35px">
  </div>
  </span>
  <input type="button" value="Reset" id="reset"/>
</div>

<div id="scriptBlock" 
     style="border: 1px solid black; position: fixed; right: 0px; bottom: 0px">
<b>Solution</b>
<div id="scriptText" style="display: none">
<i>This solution requires the compiler.</i>
<pre>
showTime(100)
showTime(700)
start = Date.now()
startSec = Math.floor(start / 1000)
now = timerB(1000)
nowSec = Math.floor(now / 1000)
clickE = $E(document.getElementById("reset"), "click")
clickSecE = clickE.snapshotE(nowSec)
diff = nowSec - clickSecE.startsWith(startSec)
-- click Reset --
showTime(diff * 25)
</pre>
</div>
</div>
<script type="text/javascript">
var scriptBlock = document.getElementById("scriptBlock");
insertValueB(
  mergeE($E(scriptBlock, "mouseover").constantE("block"),
         $E(scriptBlock, "mouseout").constantE("none"))
  .startsWith("none"),
  "scriptText", "style", "display")
</script>


<div style="position: relative; height: 20px"></div>
</body>

</html>
