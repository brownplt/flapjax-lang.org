<html>
<head>


<link rel="stylesheet" href="/demo.css"/>
<script type="text/javascript" src="/fx/flapjax.js"></script>

<title>Flapjax Demo: Basic Draft Saving</title>

<script lang="javascript">

function loader() {
  var saveClickE = clicksE('saveButton');

  var savedTimeE = saveClickE.mapE(function (_) {
    var date = new Date();
    return date.toLocaleString();});

  var draftTextE = saveClickE.snapshotE($B('theText'));
 
  insertDomB(SPAN({ className: "block" }, draftTextE.startsWith("")),
             "curDraft");
  insertDomB(SPAN(savedTimeE.startsWith("")),
             "savedTime");
}

</script>
</head>

<body onload="loader();">

<p>Click 'Save Now' to save the draft.  The draft is stored locally, and is not sent to the server.
Last Saved: <span id='savedTime'></span>
</p>

<form>
<textarea id='theText'></textarea> <br>
<input type='button' id='saveButton' value='Save Now'>
</form>
    
<p>The currently saved draft is:</p>
<div><span class="block" id='curDraft'></span></div>

</body>
</html>
